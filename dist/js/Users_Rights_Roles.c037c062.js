(self["webpackChunkvue_onlineshop"]=self["webpackChunkvue_onlineshop"]||[]).push([[223],{2473:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("权限列表")])],1),r("el-card",[r("el-table",{attrs:{data:e.rightsList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"权限名称",prop:"authName"}}),r("el-table-column",{attrs:{label:"路径",prop:"path"}}),r("el-table-column",{attrs:{label:"权限等级",prop:"level"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.level?r("el-tag",[e._v("一级")]):"1"===t.row.level?r("el-tag",{attrs:{type:"success"}},[e._v("二级")]):r("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])})],1)],1)],1)},a=[],o=r(6198),i=(r(5666),{data:function(){return{rightsList:[]}},created:function(){this.getRightsList()},methods:{getRightsList:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rights/list");case 2:if(r=t.sent,n=r.data,200===n.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取用户权限列表失败！"));case 6:e.rightsList=n.data;case 7:case"end":return t.stop()}}),t)})))()}}}),s=i,l=r(1001),u=(0,l.Z)(s,n,a,!1,null,null,null),c=u.exports},9069:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户登录")]),r("el-breadcrumb-item",[e._v("用户管理")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入搜索内容",clearable:""},on:{clear:e.getUserList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),r("el-table",{attrs:{data:e.userList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{prop:"username",label:"姓名"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),r("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.userStateChange(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",circle:""},on:{click:function(r){return e.showEditDialog(t.row.id)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(r){return e.removeUserById(t.row.id)}}}),r("el-tooltip",{attrs:{effect:"dark",content:"角色分配",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini",circle:""},on:{click:function(r){return e.setRole(t.row)}}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClose}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[r("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑用户",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},click:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.addFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[r("el-input",{model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配角色",visible:e.setRoleDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setRoleDialogVisible=t},close:e.setRoleDialogClosed}},[r("div",[r("p",[e._v("当前用户："+e._s(e.userInfo.username))]),r("p",[e._v("当前角色："+e._s(e.userInfo.role_name))]),r("p",[e._v("分配新角色： "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedRoleId,callback:function(t){e.selectedRoleId=t},expression:"selectedRoleId"}},e._l(e.rolesList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRoleDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleInf}},[e._v("确 定")])],1)])],1)],1)},a=[],o=r(6198),i=(r(5666),r(4916),r(7601),r(1703),r(2222),{data:function(){var e=function(e,t,r){var n=/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]18[0|1|2|3|4|5|6|7|8|9])\d{8}$/;if(n.test(t))return r();r(new Error("请输入合法手机号"))};return{queryInfo:{query:"",pagenum:1,pagesize:2},userList:[],total:0,addDialogVisible:!1,addForm:{username:"",password:"",email:"",mobile:""},addFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名长度在3-10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"密码长度在6-15个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{min:3,max:10,message:"邮箱名长度在3-10个字符之间",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}]},editDialogVisible:!1,editForm:{},setRoleDialogVisible:!1,userInfo:{},rolesList:[],selectedRoleId:""}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("users",{params:e.queryInfo});case 2:if(r=t.sent,n=r.data,200===n.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取用户列表失败"));case 6:e.userList=n.data.users,e.total=n.data.total;case 8:case"end":return t.stop()}}),t)})))()},userStateChange:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.put("users/".concat(e.id,"/state/").concat(e.mg_state));case 2:if(n=r.sent,a=n.data,200===a.meta.status){r.next=7;break}return e.mg_state=!e.mg_state,r.abrupt("return",t.$message.error("更新用户状态失败"));case 7:t.$message.success("更新用户状态成功");case 8:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},addDialogClose:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=(0,o.Z)(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users",e.addForm);case 4:n=t.sent,a=n.data,201!==a.meta.status&&e.$message.error("添加用户失败"),e.addDialogVisible=!1,e.getUserList(),e.$message.success("添加用户成功");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("users/"+e);case 3:if(n=r.sent,a=n.data,200===a.meta.status){r.next=7;break}return r.abrupt("return",t.$message("查询用户信息失败"));case 7:t.editForm=a.data;case 8:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},editUserInfo:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=(0,o.Z)(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("users/"+e.editForm.id,{email:e.editForm.email,mobile:e.editForm.mobile});case 4:if(n=t.sent,a=n.data,200===a.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("更新用户失败"));case 8:e.editDialogVisible=!1,e.getUserList(),e.$message.success("更新用户信息成功");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},removeUserById:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(n=r.sent,"confirm"===n){r.next=5;break}return r.abrupt("return",t.$message.info("已经取消"));case 5:return r.next=7,t.$http.delete("users/"+e);case 7:if(a=r.sent,o=a.data,200===o.meta.status){r.next=11;break}return r.abrupt("return",t.$message.error("删除用户失败"));case 11:t.$message.success("删除用户成功"),t.getUserList();case 13:case"end":return r.stop()}}),r)})))()},setRole:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.userInfo=e,r.next=3,t.$http.get("roles");case 3:if(n=r.sent,a=n.data,200===a.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error("获取角色列表失败！"));case 7:t.$message.success("获取角色列表成功！"),t.rolesList=a.data,t.setRoleDialogVisible=!0;case 10:case"end":return r.stop()}}),r)})))()},saveRoleInf:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedRoleId){t.next=2;break}return t.abrupt("return",e.$message.error("请选择一个角色！"));case 2:return t.next=4,e.$http.put("users/".concat(e.userInfo.id,"/role"),{rid:e.selectedRoleId});case 4:if(r=t.sent,n=r.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("更新角色失败！"));case 8:e.$message.success("更新角色成功！"),e.getUserList(),e.setRoleDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})))()},setRoleDialogClosed:function(){this.selectedRoleId="",this.userInfo={}}}}),s=i,l=r(1001),u=(0,l.Z)(s,n,a,!1,null,null,null),c=u.exports},4304:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("权限列表")])],1),r("el-card",[r("el-row",[r("el-col",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加角色")])],1)],1),r("el-table",{attrs:{data:e.roleList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(n,a){return r("el-row",{key:n.id,class:["bdbottom",0===a?"bdtop":"","vcenter"]},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return e.removeRightById(t.row,n.id)}}},[e._v(e._s(n.authName)+" "),r("i",{staticClass:"el-icon-caret-right"})])],1),r("el-col",{attrs:{span:19}},e._l(e.item.children,(function(n,a){return r("el-row",{key:n.id,class:[0===a?"":"bdtop","vcenter"]},[r("el-col",{attrs:{span:6}},[r("el-tag",{attrs:{type:"success",closable:""},on:{close:function(r){return e.removeRightById(t.row,n.id)}}},[e._v(e._s(n.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:18}},e._l(n.children,(function(n){return r("el-tag",{key:n.id,attrs:{type:"warning",closable:""},on:{close:function(r){return e.removeRightById(t.row,n.id)}}},[e._v(e._s(n.authName))])})),1)],1)})),1)],1)}))}}])}),r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),r("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),r("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.showEditDialog(t.row.id)}}},[e._v(" 编辑")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.removeRoleById(t.row.id)}}},[e._v("删除")]),r("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(r){return e.showSetRightDialog(t.row)}}},[e._v("分配权限")])]}}])})],1)],1),r("el-dialog",{attrs:{title:"添加角色",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:e.addForm.roleName,callback:function(t){e.$set(e.addForm,"roleName",t)},expression:"addForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:e.addForm.roleDesc,callback:function(t){e.$set(e.addForm,"roleDesc",t)},expression:"addForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改角色",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.addFormRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:e.editForm.roleDesc,callback:function(t){e.$set(e.editForm,"roleDesc",t)},expression:"editForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配权限",visible:e.setRightDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setRightDialogVisible=t},close:e.setRightDialogClosed}},[r("el-tree",{ref:"treeRef",attrs:{data:e.rightslist,props:e.treeProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.defKeys}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRightDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.allotRights}},[e._v("确 定")])],1)],1)],1)},a=[];function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){if(Array.isArray(e))return o(e)}r(2526),r(1817),r(1539),r(2165),r(8783),r(3948),r(1038);function s(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r(7042),r(8309),r(4916),r(7601);function l(e,t){if(e){if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}r(1703);function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||s(e)||l(e)||u()}var d=r(6198),f=(r(4747),r(2222),r(9600),r(5666),{data:function(){return{roleList:[],setRightDialogVisible:!1,rightslist:[],treeProps:{children:"children",label:"authName"},defKeys:[],roleId:"",addDialogVisible:!1,addForm:{roleName:"",roleDesc:""},addFormRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},editDialogVisible:!1,editForm:{}}},created:function(){this.getRolesList()},methods:{getRolesList:function(){var e=this;return(0,d.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("roles");case 2:if(r=t.sent,n=r.data,200===n.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取角色列表失败"));case 6:e.roleList=n.data;case 7:case"end":return t.stop()}}),t)})))()},removeRightById:function(e,t){var r=this;return(0,d.Z)(regeneratorRuntime.mark((function n(){var a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.$confirm("此操作将永久删除该权限，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=n.sent,"confirm"===a){n.next=5;break}return n.abrupt("return",r.$message.info("已经取消"));case 5:return n.next=7,r.$http.delete("roles/"+e.id+"/rights/"+t);case 7:if(o=n.sent,i=o.data,200===i.meta.status){n.next=11;break}return n.abrupt("return",r.$message.error("删除权限失败"));case 11:r.$message.success("删除权限成功"),e.children=i.data;case 13:case"end":return n.stop()}}),n)})))()},showSetRightDialog:function(e){var t=this;return(0,d.Z)(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.roleId=e.id,r.next=3,t.$http.get("rights/tree");case 3:if(n=r.sent,a=n.data,200===a.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error("获取权限数据失败"));case 7:t.rightslist=a.data,t.getLeafKeys(e,t.defKeys),t.setRightDialogVisible=!0;case 10:case"end":return r.stop()}}),r)})))()},getLeafKeys:function(e,t){var r=this;if(!e.children)return t.push(e.id);e.children.forEach((function(e){r.getLeafKeys(e,t)}))},setRightDialogClosed:function(){this.defKeys=[]},allotRights:function(){var e=this;return(0,d.Z)(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[].concat(c(e.$refs.treeRef.getCheckedKeys()),c(e.$refs.treeRef.getHalfCheckedKeys())),n=r.join(","),t.next=4,e.$http.post("roles/".concat(e.roleId,"/rights"),{rids:n});case 4:if(a=t.sent,o=a.data,200===o.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("分配权限失败"));case 8:e.$message.success("分配权限成功"),e.getRolesList(),e.setRightDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})))()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addRole:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=(0,d.Z)(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("roles",e.addForm);case 4:if(n=t.sent,a=n.data,201===a.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("添加角色失败！"));case 8:e.$message.success("添加角色成功！"),e.addDialogVisible=!1,e.getRolesList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return(0,d.Z)(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("roles/"+e);case 3:if(n=r.sent,a=n.data,200===a.meta.status){r.next=7;break}return r.abrupt("return",t.$message("查询用户信息失败！"));case 7:t.editForm=a.data;case 8:case"end":return r.stop()}}),r)})))()},editUserInfo:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=(0,d.Z)(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("roles/"+e.editForm.roleId,{roleName:e.editForm.roleName,roleDesc:e.editForm.roleDesc});case 4:if(n=t.sent,a=n.data,200===a.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("更新角色失败"));case 8:e.editDialogVisible=!1,e.getRolesList(),e.$message.success("更新角色信息成功");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},removeRoleById:function(e){var t=this;return(0,d.Z)(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该角色，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(n=r.sent,"confirm"===n){r.next=5;break}return r.abrupt("return",t.$message.info("已经取消删除"));case 5:return r.next=7,t.$http.delete("roles/"+e);case 7:if(a=r.sent,o=a.data,200===o.meta.status){r.next=11;break}return r.abrupt("return",t.$message.error("删除角色失败"));case 11:t.$message.success("删除角色成功"),t.getRolesList();case 13:case"end":return r.stop()}}),r)})))()}}}),m=f,p=r(1001),g=(0,p.Z)(m,n,a,!1,null,null,null),b=g.exports},8533:function(e,t,r){"use strict";var n=r(2092).forEach,a=r(9341),o=a("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},8457:function(e,t,r){"use strict";var n=r(7854),a=r(9974),o=r(6916),i=r(7908),s=r(3411),l=r(7659),u=r(4411),c=r(6244),d=r(6135),f=r(8554),m=r(1246),p=n.Array;e.exports=function(e){var t=i(e),r=u(this),n=arguments.length,g=n>1?arguments[1]:void 0,b=void 0!==g;b&&(g=a(g,n>2?arguments[2]:void 0));var h,v,y,x,w,R,k=m(t),$=0;if(!k||this==p&&l(k))for(h=c(t),v=r?new this(h):p(h);h>$;$++)R=b?g(t[$],$):t[$],d(v,$,R);else for(x=f(t,k),w=x.next,v=r?new this:[];!(y=o(w,x)).done;$++)R=b?s(x,g,[y.value,$],!0):y.value,d(v,$,R);return v.length=$,v}},9341:function(e,t,r){"use strict";var n=r(7293);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},1589:function(e,t,r){var n=r(7854),a=r(1400),o=r(6244),i=r(6135),s=n.Array,l=Math.max;e.exports=function(e,t,r){for(var n=o(e),u=a(t,n),c=a(void 0===r?n:r,n),d=s(l(c-u,0)),f=0;u<c;u++,f++)i(d,f,e[u]);return d.length=f,d}},3411:function(e,t,r){var n=r(9670),a=r(9212);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(i){a(e,"throw",i)}}},7741:function(e,t,r){var n=r(1702),a=n("".replace),o=function(e){return String(Error(e).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,s=i.test(o);e.exports=function(e,t){if(s&&"string"==typeof e)while(t--)e=a(e,i,"");return e}},7235:function(e,t,r){var n=r(857),a=r(2597),o=r(6061),i=r(3070).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});a(t,e)||i(t,e,{value:o.f(e)})}},2914:function(e,t,r){var n=r(7293),a=r(9114);e.exports=!n((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)}))},9587:function(e,t,r){var n=r(614),a=r(111),o=r(7674);e.exports=function(e,t,r){var i,s;return o&&n(i=t.constructor)&&i!==r&&a(s=i.prototype)&&s!==r.prototype&&o(e,s),e}},8340:function(e,t,r){var n=r(111),a=r(8880);e.exports=function(e,t){n(t)&&"cause"in t&&a(e,"cause",t.cause)}},6277:function(e,t,r){var n=r(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},1156:function(e,t,r){var n=r(4326),a=r(5656),o=r(8006).f,i=r(1589),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(t){return i(s)}};e.exports.f=function(e){return s&&"Window"==n(e)?l(e):o(a(e))}},857:function(e,t,r){var n=r(7854);e.exports=n},2261:function(e,t,r){"use strict";var n=r(6916),a=r(1702),o=r(1340),i=r(7066),s=r(2999),l=r(2309),u=r(30),c=r(9909).get,d=r(9441),f=r(7168),m=l("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,g=p,b=a("".charAt),h=a("".indexOf),v=a("".replace),y=a("".slice),x=function(){var e=/a/,t=/b*/g;return n(p,e,"a"),n(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),w=s.BROKEN_CARET,R=void 0!==/()??/.exec("")[1],k=x||R||w||d||f;k&&(g=function(e){var t,r,a,s,l,d,f,k=this,$=c(k),F=o(e),_=$.raw;if(_)return _.lastIndex=k.lastIndex,t=n(g,_,F),k.lastIndex=_.lastIndex,t;var D=$.groups,I=w&&k.sticky,E=n(i,k),S=k.source,C=0,V=F;if(I&&(E=v(E,"y",""),-1===h(E,"g")&&(E+="g"),V=y(F,k.lastIndex),k.lastIndex>0&&(!k.multiline||k.multiline&&"\n"!==b(F,k.lastIndex-1))&&(S="(?: "+S+")",V=" "+V,C++),r=new RegExp("^(?:"+S+")",E)),R&&(r=new RegExp("^"+S+"$(?!\\s)",E)),x&&(a=k.lastIndex),s=n(p,I?r:k,V),I?s?(s.input=y(s.input,C),s[0]=y(s[0],C),s.index=k.lastIndex,k.lastIndex+=s[0].length):k.lastIndex=0:x&&s&&(k.lastIndex=k.global?s.index+s[0].length:a),R&&s&&s.length>1&&n(m,s[0],r,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(s[l]=void 0)})),s&&D)for(s.groups=d=u(null),l=0;l<D.length;l++)f=D[l],d[f[0]]=s[f[1]];return s}),e.exports=g},7066:function(e,t,r){"use strict";var n=r(9670);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2999:function(e,t,r){var n=r(7293),a=r(7854),o=a.RegExp,i=n((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=i||n((function(){return!o("a","y").sticky})),l=i||n((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:l,MISSED_STICKY:s,UNSUPPORTED_Y:i}},9441:function(e,t,r){var n=r(7293),a=r(7854),o=a.RegExp;e.exports=n((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,t,r){var n=r(7293),a=r(7854),o=a.RegExp;e.exports=n((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},6061:function(e,t,r){var n=r(5112);t.f=n},9191:function(e,t,r){"use strict";var n=r(5005),a=r(2597),o=r(8880),i=r(7976),s=r(7674),l=r(9920),u=r(9587),c=r(6277),d=r(8340),f=r(7741),m=r(2914),p=r(1913);e.exports=function(e,t,r,g){var b=g?2:1,h=e.split("."),v=h[h.length-1],y=n.apply(null,h);if(y){var x=y.prototype;if(!p&&a(x,"cause")&&delete x.cause,!r)return y;var w=n("Error"),R=t((function(e,t){var r=c(g?t:e,void 0),n=g?new y(e):new y;return void 0!==r&&o(n,"message",r),m&&o(n,"stack",f(n.stack,2)),this&&i(x,this)&&u(n,this,R),arguments.length>b&&d(n,arguments[b]),n}));if(R.prototype=x,"Error"!==v&&(s?s(R,w):l(R,w,{name:!0})),l(R,y),!p)try{x.name!==v&&o(x,"name",v),x.constructor=R}catch(k){}return R}}},1038:function(e,t,r){var n=r(2109),a=r(8457),o=r(7072),i=!o((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:i},{from:a})},9600:function(e,t,r){"use strict";var n=r(2109),a=r(1702),o=r(8361),i=r(5656),s=r(9341),l=a([].join),u=o!=Object,c=s("join",",");n({target:"Array",proto:!0,forced:u||!c},{join:function(e){return l(i(this),void 0===e?",":e)}})},7042:function(e,t,r){"use strict";var n=r(2109),a=r(7854),o=r(3157),i=r(4411),s=r(111),l=r(1400),u=r(6244),c=r(5656),d=r(6135),f=r(5112),m=r(1194),p=r(206),g=m("slice"),b=f("species"),h=a.Array,v=Math.max;n({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var r,n,a,f=c(this),m=u(f),g=l(e,m),y=l(void 0===t?m:t,m);if(o(f)&&(r=f.constructor,i(r)&&(r===h||o(r.prototype))?r=void 0:s(r)&&(r=r[b],null===r&&(r=void 0)),r===h||void 0===r))return p(f,g,y);for(n=new(void 0===r?h:r)(v(y-g,0)),a=0;g<y;g++,a++)g in f&&d(n,a,f[g]);return n.length=a,n}})},1703:function(e,t,r){var n=r(2109),a=r(7854),o=r(2104),i=r(9191),s="WebAssembly",l=a[s],u=7!==Error("e",{cause:7}).cause,c=function(e,t){var r={};r[e]=i(e,t,u),n({global:!0,forced:u},r)},d=function(e,t){if(l&&l[e]){var r={};r[e]=i(s+"."+e,t,u),n({target:s,stat:!0,forced:u},r)}};c("Error",(function(e){return function(t){return o(e,this,arguments)}})),c("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),c("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),c("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),c("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),c("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),c("URIError",(function(e){return function(t){return o(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},8309:function(e,t,r){var n=r(9781),a=r(6530).EXISTS,o=r(1702),i=r(3070).f,s=Function.prototype,l=o(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,c=o(u.exec),d="name";n&&!a&&i(s,d,{configurable:!0,get:function(){try{return c(u,l(this))[1]}catch(e){return""}}})},4916:function(e,t,r){"use strict";var n=r(2109),a=r(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},7601:function(e,t,r){"use strict";r(4916);var n=r(2109),a=r(7854),o=r(6916),i=r(1702),s=r(614),l=r(111),u=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),c=a.Error,d=i(/./.test);n({target:"RegExp",proto:!0,forced:!u},{test:function(e){var t=this.exec;if(!s(t))return d(this,e);var r=o(t,this,e);if(null!==r&&!l(r))throw new c("RegExp exec method returned something other than an Object or null");return!!r}})},1817:function(e,t,r){"use strict";var n=r(2109),a=r(9781),o=r(7854),i=r(1702),s=r(2597),l=r(614),u=r(7976),c=r(1340),d=r(3070).f,f=r(9920),m=o.Symbol,p=m&&m.prototype;if(a&&l(m)&&(!("description"in p)||void 0!==m().description)){var g={},b=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),t=u(p,this)?new m(e):void 0===e?m():m(e);return""===e&&(g[t]=!0),t};f(b,m),b.prototype=p,p.constructor=b;var h="Symbol(test)"==String(m("test")),v=i(p.toString),y=i(p.valueOf),x=/^Symbol\((.*)\)[^)]+$/,w=i("".replace),R=i("".slice);d(p,"description",{configurable:!0,get:function(){var e=y(this),t=v(e);if(s(g,e))return"";var r=h?R(t,7,-1):w(t,x,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:b})}},2165:function(e,t,r){var n=r(7235);n("iterator")},2526:function(e,t,r){"use strict";var n=r(2109),a=r(7854),o=r(5005),i=r(2104),s=r(6916),l=r(1702),u=r(1913),c=r(9781),d=r(133),f=r(7293),m=r(2597),p=r(3157),g=r(614),b=r(111),h=r(7976),v=r(2190),y=r(9670),x=r(7908),w=r(5656),R=r(4948),k=r(1340),$=r(9114),F=r(30),_=r(1956),D=r(8006),I=r(1156),E=r(5181),S=r(1236),C=r(3070),V=r(6048),L=r(5296),N=r(206),O=r(1320),U=r(2309),j=r(6200),A=r(3501),Z=r(9711),q=r(5112),z=r(6061),B=r(7235),P=r(8003),T=r(9909),K=r(2092).forEach,M=j("hidden"),J="Symbol",W="prototype",Y=q("toPrimitive"),H=T.set,Q=T.getterFor(J),X=Object[W],G=a.Symbol,ee=G&&G[W],te=a.TypeError,re=a.QObject,ne=o("JSON","stringify"),ae=S.f,oe=C.f,ie=I.f,se=L.f,le=l([].push),ue=U("symbols"),ce=U("op-symbols"),de=U("string-to-symbol-registry"),fe=U("symbol-to-string-registry"),me=U("wks"),pe=!re||!re[W]||!re[W].findChild,ge=c&&f((function(){return 7!=F(oe({},"a",{get:function(){return oe(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=ae(X,t);n&&delete X[t],oe(e,t,r),n&&e!==X&&oe(X,t,n)}:oe,be=function(e,t){var r=ue[e]=F(ee);return H(r,{type:J,tag:e,description:t}),c||(r.description=t),r},he=function(e,t,r){e===X&&he(ce,t,r),y(e);var n=R(t);return y(r),m(ue,n)?(r.enumerable?(m(e,M)&&e[M][n]&&(e[M][n]=!1),r=F(r,{enumerable:$(0,!1)})):(m(e,M)||oe(e,M,$(1,{})),e[M][n]=!0),ge(e,n,r)):oe(e,n,r)},ve=function(e,t){y(e);var r=w(t),n=_(r).concat(ke(r));return K(n,(function(t){c&&!s(xe,r,t)||he(e,t,r[t])})),e},ye=function(e,t){return void 0===t?F(e):ve(F(e),t)},xe=function(e){var t=R(e),r=s(se,this,t);return!(this===X&&m(ue,t)&&!m(ce,t))&&(!(r||!m(this,t)||!m(ue,t)||m(this,M)&&this[M][t])||r)},we=function(e,t){var r=w(e),n=R(t);if(r!==X||!m(ue,n)||m(ce,n)){var a=ae(r,n);return!a||!m(ue,n)||m(r,M)&&r[M][n]||(a.enumerable=!0),a}},Re=function(e){var t=ie(w(e)),r=[];return K(t,(function(e){m(ue,e)||m(A,e)||le(r,e)})),r},ke=function(e){var t=e===X,r=ie(t?ce:w(e)),n=[];return K(r,(function(e){!m(ue,e)||t&&!m(X,e)||le(n,ue[e])})),n};if(d||(G=function(){if(h(ee,this))throw te("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?k(arguments[0]):void 0,t=Z(e),r=function(e){this===X&&s(r,ce,e),m(this,M)&&m(this[M],t)&&(this[M][t]=!1),ge(this,t,$(1,e))};return c&&pe&&ge(X,t,{configurable:!0,set:r}),be(t,e)},ee=G[W],O(ee,"toString",(function(){return Q(this).tag})),O(G,"withoutSetter",(function(e){return be(Z(e),e)})),L.f=xe,C.f=he,V.f=ve,S.f=we,D.f=I.f=Re,E.f=ke,z.f=function(e){return be(q(e),e)},c&&(oe(ee,"description",{configurable:!0,get:function(){return Q(this).description}}),u||O(X,"propertyIsEnumerable",xe,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:G}),K(_(me),(function(e){B(e)})),n({target:J,stat:!0,forced:!d},{for:function(e){var t=k(e);if(m(de,t))return de[t];var r=G(t);return de[t]=r,fe[r]=t,r},keyFor:function(e){if(!v(e))throw te(e+" is not a symbol");if(m(fe,e))return fe[e]},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),n({target:"Object",stat:!0,forced:!d,sham:!c},{create:ye,defineProperty:he,defineProperties:ve,getOwnPropertyDescriptor:we}),n({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Re,getOwnPropertySymbols:ke}),n({target:"Object",stat:!0,forced:f((function(){E.f(1)}))},{getOwnPropertySymbols:function(e){return E.f(x(e))}}),ne){var $e=!d||f((function(){var e=G();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}));n({target:"JSON",stat:!0,forced:$e},{stringify:function(e,t,r){var n=N(arguments),a=t;if((b(t)||void 0!==e)&&!v(e))return p(t)||(t=function(e,t){if(g(a)&&(t=s(a,this,e,t)),!v(t))return t}),n[1]=t,i(ne,null,n)}})}if(!ee[Y]){var Fe=ee.valueOf;O(ee,Y,(function(e){return s(Fe,this)}))}P(G,J),A[M]=!0},4747:function(e,t,r){var n=r(7854),a=r(8324),o=r(8509),i=r(8533),s=r(8880),l=function(e){if(e&&e.forEach!==i)try{s(e,"forEach",i)}catch(t){e.forEach=i}};for(var u in a)a[u]&&l(n[u]&&n[u].prototype);l(o)}}]);
//# sourceMappingURL=Users_Rights_Roles.c037c062.js.map